!function(){"use strict";angular.module("geolibApp",["geolibApp.Controller","geolibApp.Map","geolibApp.Track"])}(),function(){"use strict";angular.module("geolibApp.Controller",[]).controller("layoutController",function(){}).controller("geolibController",function($scope,trackService,mapService){var activeTrack;$scope.loadTrack=function(track){trackService.loadTrack(track,function(data,track){activeTrack=track,mapService.loadMap(data)})},$scope.listTracks=function(){trackService.listTracks(function(tracks){$scope.tracks=tracks})},$scope.isActiveTrack=function(track){return void 0!==activeTrack&&void 0!==track&&activeTrack._id===track._id},$('[data-js-selector="fileupload"]').fileupload({dataType:"json",done:function(e,uploadedTracks){var track=uploadedTracks.result[0];$scope.loadTrack(track),$scope.tracks.push(track)}}),$scope.listTracks()})}(),function(){"use strict";angular.module("geolibApp.Map",[]).factory("mapService",function(){return{loadMap:function(data){var xmlData=$.parseXML(data),map=new google.maps.Map(document.getElementById("map-canvas"),{zoom:8,mapTypeId:google.maps.MapTypeId.TERRAIN}),parser=new GPXParser(xmlData,map);parser.setTrackColour("#ff0000"),parser.setTrackWidth(5),parser.setMinTrackPointDelta(.001),parser.centerAndZoom(xmlData),parser.addTrackpointsToMap(),parser.addWaypointsToMap()}}})}(),function(){"use strict";angular.module("geolibApp.Track",[]).factory("trackService",function($http){return{loadTrack:function(track,callback){$http({method:"GET",url:"/geolib/resources/tracks/"+track._id}).success(function(data){callback(data,track)})},listTracks:function(callback){$http({method:"GET",url:"/geolib/resources/tracks"}).success(function(data){callback(data)})}}})}();
/*! GeoLib 16-09-2014 */
!function(){"use strict";var a=angular.module("geolib",[]);a.factory("MapService",function(){return{loadMap:function(a){var b={zoom:8,mapTypeId:google.maps.MapTypeId.TERRAIN},c=new google.maps.Map(document.getElementById("map-canvas"),b),d=$.parseXML(a),e=new GPXParser(d,c);e.setTrackColour("#ff0000"),e.setTrackWidth(5),e.setMinTrackPointDelta(.001),e.centerAndZoom(d),e.addTrackpointsToMap(),e.addWaypointsToMap()}}}),a.factory("TrackService",function(a){return{loadTrack:function(b,c){a({method:"GET",url:"/geolib/resources/tracks/"+b._id}).success(function(a){c(a,b)})},listTracks:function(b){a({method:"GET",url:"/geolib/resources/tracks"}).success(function(a){b(a)})}}}),a.controller("GeoLibController",function(a,b,c,d){var e=void 0;a.loadTrack=function(a){c.loadTrack(a,function(a,b){e=b,d.loadMap(a)})},a.listTracks=function(){c.listTracks(function(b){a.tracks=b})},a.isActiveTrack=function(a){return void 0!==e&&void 0!==a&&e._id===a._id},$('[data-js-selector="fileupload"]').fileupload({dataType:"json",done:function(b,c){var d=c.result[0];a.tracks.push(d),a.loadTrack(d)}}),a.listTracks()})}();